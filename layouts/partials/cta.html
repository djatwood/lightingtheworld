{{ $scratch := newScratch }}
{{ with .background.color }}{{$scratch.Set "bg" (printf `style="background-color:%s"` .) }}{{ end }}
<section class="bg-primary-dark" {{ $scratch.Get "bg" | safeHTMLAttr }}>
    <div class="content-width relative py-20">
        {{ with .background }}
        <div class="absolute top-0 right-0 flex justify-end w-full h-full"
            style="mix-blend-mode: {{or .blend `normal`}}">
            {{ $img := resources.Get .image }}
            {{ $img = $img.Fit "2000x600" }}
            <img class="h-full" src="{{ $img.Permalink }}">
        </div>
        {{ end }}

        <div class="relative">
            <div class="max-w-lg">
                {{ with .subtitle }}
                <h3 class="mb-2 text-xl text-accent font-display uppercase">{{ . }}</h3>
                {{ end }}
                <h2 class="mb-6 text-4xl text-white font-display font-bold uppercase">{{ .title }}</h2>
                {{ with .description }}
                <p class="mb-8 text-xl text-white">{{ . }}</p>
                {{ end }}

                {{ with .icons }}
                <div class="grid grid-cols-2 gap-4 mb-8">
                    {{ range . }}
                    <div class="flex">
                        <div class="w-14 h-14 flex-shrink-0 rounded mr-4 bg-gray-200 bg-opacity-50"></div>
                        <p class="max-w-min text-lg text-white font-display font-bold uppercase">{{ .label }}</p>
                    </div>
                    {{ end }}
                </div>
                {{ end }}
            </div>
            <div class="flex -m-3">
                {{ range $index, $button := .buttons }}
                <a class="button m-3 {{ .class }}" href="{{ .link }}">{{ .label }}</a>
                {{ end }}
            </div>
        </div>
    </div>
</section>